프로토콜의 정의?
컴퓨터 네트워크를 하기 위하여 송수신 장치 간 통일된 통신 규약

OSI 7 Layer(by ISO)
프로토콜의 개발 기준.
복잡함 감소
인터페이스의 표준화
상호 호환성의 확보
기술개발의 가속화
설명과 이해(습득)의 간소화
물리 - 데이터 링크 - 네트워크 - 전송 - 세션  - 표현 - 응용 계층의 7단계로 구성된다.
각 계층은 헤더와 데이터 단위(데이터 유닛 || 프로토콜 데이터 유닛)으로 정의되는데, 헤더에는 각 계층의 기능과 관련된 정보가 포함된다. 송신 측이 헤더를 생성하여 추가하면, 수신측에서 해당 계층이 이 헤더를 사용한다.
상위 계층이나 하위 계층 사이에 주고받는 것을 서비스 데이터 단위(SDU)라고 하고,  같은 계층 사이에서 주고받는건 프로토콜 데이터 단위(PDU)라고 한다.
이 데이터 단위는 송신 측이나 수신 측의 다음 계층에 데이터 정보를 전송할 때 사용한다.

모듈->
A = [1,2,3,4];
B = [3,4,5,6];
C = [3,4,6,7];
라이브러리화 : [1,2,3,4,5,6,7];
-----------
TPDU : 세그먼트tcp, 데이터그램udp - > 전송 계층
NPDU:  (패킷) - > 네트워크 계층
DPDU:  프레임 -> 데이터링크 계층
각PDU 는 Header + data 로 구성
헤더: 자신의 계층에 대한 정보를 가지고 있다. 송신과정에서 헤더를 데이터에 붙여서 내려오는 과정을 캡슐화로 칭한다. (단, 응용, 물리는 헤더를 안붙임.)
수신 호스트에서는 deCapsulation(헤더를 들어내버림) 과정 진행. 이 과정에서 각 계층에서 자신의 계층의 정보가 들어있는 헤더를 확인할 수 있다. 단, 상위 계층의 헤더는 볼 수가 없다.
데이터링크 계층에서만 헤더 + 트레일러를 붙인다. (checkSum)

2계층(데이터링크) 에서 방식이 대부분 정해짐. 와이파이인지 등등...
네트워크: 올바른 전송 경로를 선택
전송 계층: 송수신 프로세스 사이의 연결 기능

~~~~
표현 계층 : 데이터의 포맷(표현방법)을 정하고 인코딩, 디코딩, 암호화, 압축 등을 결정.
응용 계층: 사용자를 위한 인터페이스를 지원. 사용자에게 보이는 메인 계층.

---------------
utp ftp stp 키워드
cat.5: 100M
cat.6: 1G
cat.5e: 가정 위주. 좀 더 보강해서 기가인터넷을 지원 가능하게 함.(단, 거리가 짧아야 제 속도가 나옴)
그런데, 어차피 다 최대 거리가 100m 이내.
동축케이블 정도는 되어야 500m까지 가능.
재대로 장거리 하려면 광케이블이 되어야 한다.


통신방식(LAN 통신 방식)

유니캐스트
1:1
브로드캐스트
1:N 불특정 다수에게 다.
멀티캐스트
특정 그룹(M그룹)에게만 전송.

2계층: 물리주소-MAC주소 48bit 데이터링크
3계층: 논리주소-IP 32bit 네트워크
4계층: 포트주소 16bit 전송

MAC Address?
24bit: 분류번호(보통 기업의 고유코드)
24bit: 시리얼 번호(제품마다 고유함)

통신 방식
단방향(심플렉스?)
-송신과 수신이 미리 고정됨. 데이터가 한쪽으로만 전송된다.
일단 송신과 수신을 연결해야 되니 단방향이라도 전송로는 2개가 필요.
양방향(듀플렉스)
- 반이중(하프 듀플렉스?)
한쪽이 보낼때는 받기만 하는 방식. 서로가 서로 보내는건 불가능.(ex>무전기)
- 전이중(풀 //)


교환 시스템

네트워크 양단에 연결된호스트들이 전송하는 패킷은 전송과정에서 전송 경로 중간에 위치한 교환 시스템을 거침.
교환 시스템은 데이터를 최종 목적지까지 올바르게 전달하도록 데이터를 중개하는 교환기능을 제공

회선 교환: 연결형 서비스를 제공
음성 전화 서비스에서 발전
고정 대역의 전송률을 지원해 네트워크의 구조가 상대적으로 단순.

패킷 교환: 비연결형 서비스를 제공
컴퓨터 네트워크에서 발전
전송 데이터를 패킷 단위로 나누어 전송
가변 전송률을 지원해 네트워크 구조가 복잡


***네트워크 접속형태?
네트워크에 연결된 여러 노드의 물리적인 배열이아닌 상호 연결방법을 보여준다.
성형, 그물형, 트리형, 버스형, 링형
결론: 혼합형.

TCP/IP
전송 제어 프로토콜+인터넷 프로토콜
인터넷에서 사용하는 응용 프로그램은 대부분 이 TCP/IP 프로토콜을 이용하여 데이터를 교환.
그러므로
TCP/UDP: 사용자 데이터를 전송하는 전송 계층 프로토콜
IP: 사용자 데이터를 전송하는 네트워크 계층 프로토콜

ARP: IP 주소를 MAC 주소로 변환
RARP: MAC 주소를 IP 주소로 변환

ICMP
오류 메세지를 전송ㅎ는 프로토콜
IP 프로토콜에 캡슐화되어 전송됨.


네트워크 장비
1계층: 허브(더미허브, 확장하는 용도) 중계기(리피터)
허브 등의 문제-모조리 브로드캐스팅 해버린다. 100m이 와도 10m 여러개로 분해하는 등, 저하가 일어난다.
2계층: MAC 스위칭허브(2계층 헤더까지 볼 수 있다. 바로 목적지 주소로 지정된 기기로 패킷을 보낸다.), 스위치, 브릿지(서로 다른 방식을 통신하게 해 준다.)  
3계층: IP L3스위치(일부4계층의 역할 가능), 라우터


인터네트워킹
둘 이상의 서로 다른 네트워크를 연결하는 기능
리피터:1계층. 한쪽단에 들어온 비트 신호를 증폭하여 다른 단으로 전달

브리지:1,2계층 기능까지 지원가능. 한쪽단 프레임의 MAC계층 헤더를 다른단의 맥계층 헤더로 변형해 전송할 수 있어 종류가 다른 LAN으로 연결 가능, 송수신호스트의 위치가 서로 다른 LAN에 속하면 중개 기능을 수행, 리피터보다 랜과 랜 사이의 불필요한 트래픽 발생을 억제
프레임의 송수신자가 동일 방향이면 무시, 다른 방향이면 ???
ARP 프로토콜은 2계층과 IP의 사이에 있다. 2계층까지 가지는 않음. 즉 프레임만 보는 것이다.
최종목적지가 아닌, 다음 장비의 맥주소를 가리킨다.
-스패닝 트리: 네트워크의 논리적 연결 상태를 비순환 형태로 간주. 순환구조가 나지 않도록 되돌아오는 끝점을 막는 방식.
-소스 라우팅 브리지
송신 호스트가 프레임이 수신 호스트까지 도달하기 위한 라우팅 정보를 제공
송신프레임에 수슨 호스트까지의 모든 경로를 기술해서 모든 라우팅 정보가 프레임 자체에 포함.

라우터: 네트워크를 연결하는 장비, 1,2, 3계층 기능 위주
게이트웨이: 서로 다른 응용 환겨을 지원하기 위해서 사용할 수 있으므로, 네트워크 양단의 특성이 다른 환경에서 중개하는 역할


3계층에서의 IP 인터네트워킹

인터넷에서 네트워크를 연결하는 방식
패킷 중계 기능은 IP 프로토콜이 수행
양쪽 MAC 계층이 다르면 패킷 변환 기능이 필요.
필요시 패킷 분할과 병합 과정도 수행(라우터가 하는 역할)


인터넷 라우팅
-고정 경로 배정
송수신 호스트 사이에 영구 불변의 고정 경로를 배정
간단하지만 효율적인라우팅이 가능/그러나 트래픽 변화에 따른 동적 경로 배적이 불가능.
호스트 간 트래픽을 미리 측정하여 고정 경로를 적절히 배정하면 간단하고 효율적인 라우팅이 가능.
-적응 경로 배정
인터넷 연결 상태가 변하면 이를 전달 경로 배정에 반영
단점:경로 결정 과정에서 라우터의 부담이 증가, 라우터 사이의 시간적인 정보의 불일치성 문제가 항상 존재

QoS
네트워크에서 보통 데이터를 어느 정도 신뢰성 있게 전송하는가 품질 측정



IEEE 802 시리즈

랜 환경에서 2계층 기능(데이터링크)을 MAC과 LLC계층으로 분리.
이더넷 프레임 구조 ㄱ.
프레임: MAC = MAC헤더 + LLC프레임+MAC트레일러
Preamable: 수신 호스트가 송신 호스트의 클록 동기를 맞추는 용도
Start Delimiter: 프렝ㅁ의 시작 위치
Source Address: 송신 호스트의 MAC 주소
Destination Address: 수신 호스트의 MAC 주소
Length: Data 필드에 포함된 가변 길이의 전송 데이터 크기
Data:0~1500
Pad:0~46
Checksum: 데이터 변형 오류를 감지하는 기능.


오류 검출

단일, 다중-비트 오류, 집단 오류의 3가지 경우의 수.
순방향 오류 복구: 수신 호스트 스스로 오류복구 코드를 이용해 복구
역방향 오류 복구: 오류 검출 코드를 이용해 수신 호스트가 송신 호스트에 오류를 방지.


*****순환 중복 검사(CRC, Cyclic Redundancy Check)
정화하게 오류를 검출하기 위해, 다항식 코드를 사용하는 방법
오류가 발생한 순간 그 주위에서 집단 오류를 검출하는 능력이 탁월하다.
다항식?
-CRC 발생기는 0과 1의 String 보다는 대수 다항식으로 표현하며, 하나의 다항식은 하나의 제수(Divisor)를 표현한다.



네트워크 계층의 기능

라우팅
패킷의 전송 경로를 지정
전송 경로 결정시 고려 사항
-공평 원칙, 효율 원칙

정적/동적 라우팅
정적 라우팅: 패킷 전송이 이루어지기 전 경로 정보를 라우터가 미리 저장하여 중개, 경로 정보의 갱신이 어려우므로, 네트워크의 변화 및 혼잡도 대처 부족
동적 라우팅:  라우터의 경로 정보가 네트워크 상황에 따라 적절히 조절됨, 경로 정보의 수집과 관리에 따른 성능 저하

HELLO 패킷: 주변 라우터에 헬로 패킷을 보내어 주변 경로 정보를 파악하는 용도
ECHO 패킷: 라우터 사이의 전송 지연 시간을 측정하는 용도

라우팅 정보의 처리
-소스 라우팅
-분산 라우팅
-중앙 라우팅
-계층 라우팅


간단한 라우팅 프로토콜
-플러딩
-**거리 백터 프로토콜
RIP?
거리 벡터 프로토콜을 사용하는 내부 라우팅 프로토콜(UDP사용)
추가하기.
-**링크 상태 프로토콜
거리 벡터의 반대의 원리
누가: 네트워크에 연결된 모든 라우터간의 라우팅 정보를 교환
무엇을: 개별라우터에서 주변라우터까지 패킷을 전송하는게 걸리는 거리 정보
*정보전달 시점의 차이
거리 벡터: 주기적으로 전달
*링크 상태: 주변 상황에 변화가 생기는 경우

내부 라우팅 프로토콜
거리벡터 RIP
링크상태 OSPF

외부 라우팅 프로토콜
경로 벡터 프로토콜: 단순히 연결 가능한지에 대한 정보만 제공


